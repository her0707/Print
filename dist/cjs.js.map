{"version":3,"file":"cjs.js","sources":["../src/print.ts","../src/utils/html.ts","../src/utils/iframe-print.ts"],"sourcesContent":["import { addCustomStyleSheet, cloneElement, makePrintIframe } from \"./utils/html\";\nimport { iframePrint } from \"./utils/iframe-print\";\n\nfunction print({\n  node,\n  stylesheet = \"\",\n  ignoreElements = [\".no-print\"],\n  iframe = true,\n  title = \"\",\n  frameId = \"print-iframe\",\n}: PrintParams) {\n  let printArea: HTMLElement | Document;\n\n  if (node) {\n    printArea = node;\n  } else {\n    printArea = document;\n  }\n\n  const targetStyles = document.querySelectorAll(\"style, link, meta, base, title\");\n\n  const styles = [...targetStyles];\n  if (stylesheet) {\n    const customStyle = addCustomStyleSheet(stylesheet);\n    styles.push(customStyle);\n  }\n\n  let copy = cloneElement(printArea, { ignoreElements });\n\n  styles.forEach(style => copy.appendChild(style));\n\n  const printIframe = makePrintIframe({ title, frameId });\n\n  iframePrint(copy, printIframe);\n}\n\nexport { print };\n","export function cloneElement(\n  element: HTMLElement | Document,\n  params: Pick<PrintParams, \"ignoreElements\">\n) {\n  // TODO Print 시 예외 영역 작업필요\n  const clone = element.cloneNode(true);\n\n  return clone;\n}\n\nexport function makePrintIframe(\n  params: Pick<PrintParams, \"title\" | \"frameId\">\n) {\n  const iframe = document.createElement(\"iframe\");\n  iframe.setAttribute(\n    \"style\",\n    \"visibility: hidden; height: 0; width: 0; position: absolute; border: 0\"\n  );\n\n  iframe.srcdoc = \"<html><head><title>\" + params.title + \"</title>\";\n  iframe.setAttribute(\"id\", params.frameId);\n\n  return iframe;\n}\n\nexport function addCustomStyleSheet(stylesheet: string) {\n  const customStyle = document.createElement(\"link\");\n  customStyle.rel = \"stylesheet\";\n  customStyle.href = stylesheet;\n  return customStyle;\n}\n","export function iframePrint(\n  element: Node,\n  iframe: HTMLIFrameElement,\n  params?: PrintParams\n) {\n  document.getElementsByTagName(\"body\")[0].appendChild(iframe);\n\n  if (iframe) {\n    iframe.onload = () => {\n      let printDocument =\n        iframe.contentWindow?.document || iframe.contentDocument;\n      if (printDocument) {\n        printDocument.body.appendChild(element);\n        iframe.contentWindow?.print();\n      }\n    };\n  }\n}\n"],"names":["_ref","node","_ref$stylesheet","stylesheet","ignoreElements","iframe","printArea","_ref$title","title","_ref$frameId","frameId","document","styles","_toConsumableArray","querySelectorAll","customStyle","createElement","rel","href","addCustomStyleSheet","push","copy","cloneNode","forEach","style","appendChild","params","printIframe","setAttribute","srcdoc","element","getElementsByTagName","onload","_iframe$contentWindow","_iframe$contentWindow2","printDocument","contentWindow","contentDocument","body","print","iframePrint"],"mappings":"wxBAGA,SAAcA,GAOA,IANZC,EAAID,EAAJC,KAAIC,EAAAF,EACJG,WAAAA,OAAa,IAAHD,EAAG,GAAEA,EAAAF,EACfI,eAA8BJ,EAC9BK,OAAAA,IAIIC,EAJSC,EAAAP,EACbQ,MAAAA,OAAQ,IAAHD,EAAG,GAAEA,EAAAE,EAAAT,EACVU,QAAAA,OAAU,IAAHD,EAAG,eAAcA,EAKtBH,EADEL,GAGUU,SAGd,IAEMC,EAAMC,EAFSF,SAASG,iBAAiB,mCAG/C,GAAIX,EAAY,CACd,IAAMY,ECEJ,SAA8BZ,GAClC,IAAMY,EAAcJ,SAASK,cAAc,QAG3C,OAFAD,EAAYE,IAAM,aAClBF,EAAYG,KAAOf,EACZY,CACT,CDPwBI,CAAoBhB,GACxCS,EAAOQ,KAAKL,EACb,CAED,IAAIM,EAAoBf,ECtBFgB,WAAU,GDwBhCV,EAAOW,SAAQ,SAAAC,GAAK,OAAIH,EAAKI,YAAYD,MAEzC,ICpBAE,EAEMrB,EDkBAsB,GCpBND,EDoBoC,CAAElB,MAAAA,EAAOE,QAAAA,IClBvCL,EAASM,SAASK,cAAc,WAC/BY,aACL,QACA,0EAGFvB,EAAOwB,OAAS,sBAAwBH,EAAOlB,MAAQ,WACvDH,EAAOuB,aAAa,KAAMF,EAAOhB,SAE1BL,aCrBPyB,EACAzB,EACAqB,GAEAf,SAASoB,qBAAqB,QAAQ,GAAGN,YAAYpB,GAEjDA,IACFA,EAAO2B,OAAS,WAAK,IAAAC,EAGAC,EAFfC,GACkBF,QAApBA,EAAA5B,EAAO+B,yBAAaH,SAApBA,EAAsBtB,WAAYN,EAAOgC,gBACvCF,IACFA,EAAcG,KAAKb,YAAYK,GACX,QAApBI,EAAA7B,EAAO+B,qBAAa,IAAAF,GAApBA,EAAsBK,UAI9B,CFgBEC,CAAYnB,EAAMM,EACpB"}